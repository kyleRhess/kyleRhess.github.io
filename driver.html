<!DOCTYPE HTML>
<html>
	<head>
		<title>Kyle Hess | Electrical Engineer</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="assets/css/main.css" />
		<!--[if lte IE 9]><link rel="stylesheet" href="assets/css/ie9.css" /><![endif]-->
		<!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
	</head>
	<body>

		<!-- Page Wrapper -->
			<div id="page-wrapper">

				<!-- Header -->
					<header id="header">
						<h1><a href="index.html">Kyle Hess - Seattle, WA</a></h1>
						<nav>
							<a href="#menu">Menu</a>
						</nav>
					</header>

				<!-- Menu -->
					<nav id="menu">
						<div class="inner">
							<h2>Menu</h2>
							<ul class="links">
								<li><a href="index.html">Home</a></li>
								<li><a href="resume.html">Resume</a></li>
								<li><a href="projects.html">Projects</a></li>
							</ul>
							<a href="#" class="close">Close</a>
						</div>
					</nav>

				<!-- Wrapper -->
					<section id="wrapper">
						<header>
							<div class="inner">
								<h2>Brushless DC Motor Driver PCB</h2>
								<p>Designed specifically for the Nanotec DF45 16 pole, three phase brushless DC motor with hall sensor feedback. This driver was a crucial component of a larger, <a href="cube.html">controls capstone project</a>. The capstone was a group project, but this module was delegated to me.</p>
							</div>
						</header>

						<!-- Content -->
							<div class="wrapper">
								<div class="inner">

									<section>
									<h1 class="major">Design</h1>
										<p><span class="image left"><a href="images/driverBRD.JPG"><img src="images/driverBRD.JPG" alt="" /></a></span>The design for this driver was heavily based on the driver design from my other <i>motor controller</i> project. The driver circuitry was all based around the HIP4086 3-phase MOSFET driver made by Intersil. To control the switching sequence, a discrete Atmel Atmega328p microcontroller was utilized in the design. In order to program the Atmega, an ISP header was included on the PCB. A Hall-effect based current sensor (ACS712) was placed on one of the output phases to measure the current to the motor. In order to control the motor torque/speed, an input PWM signal is used as control over the complementary switching scheme of the MOSFETs (4-quadrant operation).<br /></p>
											<section>
											<b>Parts: <br /></b><i>
											-CSD18537NQ5A MOSFETs x6<br />
											-SD2114S040S8R0 Freewheeling Diode x6<br />
											-74HC153 Multiplexer x3<br />
											-SN74AHCT Inverter IC x1<br />
											-HIP4086A MOSFET Driver x1<br />
											-ATMEGA328P uController x1<br />
											-ACS712 Current Sensor x1<br />
											-Various resistors and capacitors</i><br />
										<h3><a href="driverSch.pdf" target="_blank">Schematic PDF</h3></a>
										<h3><a href="https://github.com/kyleRhess/DF45Driver">Atmega Code</h3></a>
										</section>
									</section>
									<section>
									<h1 class="major">Rev 1.0</h1>
										<p><span class="image left"><img src="images/driverOG.JPG" alt="" /></span>The first version of the driver worked initially, but had some major problems. The first obvious issue was the incorrect package type used for the Atmega. This forced me to hand solder a lead-less IC which was both time consuming, and damaging to the part. <span class="image right"><img src="images/wrongPac.JPG" alt="" /></span>This led to intermittent failures during operation. The SMD package type was changed and replaced in the PCB design, and new boards were ordered. Unfortunately, in the redesign and quick reorder I missed a single Vcc connection on the Atmega. This caused the chip to randomly reset during operation, and would sometimes lead to shoot-through of the MOSFETs and broken components. 
										</p>
									</section>
									<section>
									<h1 class="major">Final Revision</h1>
										<div class="box alt">
											<div class="row uniform">
												<div class="4u"><span class="image fit"><img src="images/driver/1.JPG" alt="" /></span></div>
												<div class="4u"><span class="image fit"><img src="images/driver/3.JPG" alt="" /></span></div>
												<div class="4u"><span class="image fit"><img src="images/driver/4.JPG" alt="" /></span></div>
											</div>
										</div>
									</section>
									<section>
										<iframe width="640" height="360" src="https://www.youtube.com/embed/hPmZDf9gJBY" frameborder="0" allowfullscreen></iframe>
									</section>
									<section>
									<h1 class="major">Specifications</h1>
										<p><span class="image left"><img src="images/driver1.JPG" alt="" /></span>This driver was designed to meet the specifications of the DF45:<br />
										-24V maximum<br />
										-3.5A Continuous, 9A Peak currents<br />
										-0RPM to 4480RPM<br />
										-Fast speed and direction changes<br />
										-Complementary switching<br />
										-Controllable via PWM input<br />
										<br />
										The driver meets all of these specs, but unfortunately it is unable to brake/change direction under full power. This is due to the large voltage rise that occurs during it's regenerative braking stage. There are several possible solutions to this.
										</p>
									</section>
									<section>
									<h1 class="major">Future Improvements</h1>
										<p>Future iterations of this design will hopefully incorporate on-board voltage conversion for the various ICs to address the problems that remote voltage conversion introduces. I want to add a Schmitt-trigger-activated braking resistor to reduce the voltage rise during braking. I would also like to replace the Hall-effect based current sensor with a more precise, and simpler, resistor-based design. The 'enable' pin of the MOSFET driver should be controllable via software instead of external jumper pins. Finally, an I<sup>2</sup>C interface could be developed to allow two-way communication with the driver via only two wires. 
										</p>
									</section>
								</div>
							</div>

					</section>

				<!-- Footer -->
					<section id="footer">
						<div class="inner">
							<ul class="copyright">
								<li>Kyle Hess</li><li>Seattle, Washington</li>
							</ul>
						</div>
					</section>

			</div>

		<!-- Scripts -->
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/util.js"></script>
			<!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
			<script src="assets/js/main.js"></script>

	</body>
</html>